<?xml version="1.0" encoding="UTF-8"?>

<section xml:id="sec-quadratic-space-associated-to-quaternion-algebra" xmlns:xi="http://www.w3.org/2001/XInclude">
    <title>Quadratic space associated to quaternion algebra</title>
    <introduction>
        <p>
            Throughout this section we assume that <m>F</m> is a field with <m>{\rm ch}(F)\neq 2</m>. The set of nonzero elements of <m>F</m> is denoted by <m>\dot{F}</m>.
        </p>
    </introduction>
    <definition xml:id="def-symmetric-bilinear-form-associated-to-quaternion-algebra">
        <title>Symmetric bilinear form associated to quaternion algebra</title>        
        <statement>
            <p>
                Let <m>Q=(a,b)_F</m> be a quaternion algebra over <m>F</m>. The following map is a symmetric bilinear form associated to <m>Q</m>.
                <me>
                    b_Q\colon Q\times Q\to F\quad\text{given by}\quad (x,y)\mapsto\tfrac{1}{2}\left(x\gamma(y)+y\gamma(x)\right)=\tfrac{1}{2}\Trd{Q}\left(x\gamma(y)\right)
                </me>
            </p>
        </statement>
    </definition>
    <definition xml:id="def-quadratic-form-associated-to-quaternion-algebra">
        <title>Quadratic form associated to quaternion algebra</title>
        <statement>
            <p>
                We keep notations of <xref ref="def-symmetric-bilinear-form-associated-to-quaternion-algebra"/> above. The quadratic form <m>q</m> <em>associated to <m>b_Q</m></em> is given by <m>q(x)=b_Q(x,x)</m> for <m>x\in Q</m>.
            </p>
        </statement>
    </definition>
    <note xml:id="note-reduced-norm-as-associated-quadratic-form">
        <statement>
            <p>
                For <m>x\in Q</m>, we get that <m>q(x)=\Nrd{Q}(x)</m>. In particular,
                <me>
                    q(1)=1,\quad q(i)=-a\cdot 1,\quad q(j)=-b\cdot 1,\quad\text{and}\quad q(k)=ab\cdot 1.
                </me>
                
            </p>
        </statement>
    </note>
    <definition xml:id="def-matrix-associated-to-norm-form">
        <title>Matrix associated to <m>b_Q</m></title>     
        <statement>
            <p>
                Keep notations of <xref ref="def-symmetric-bilinear-form-associated-to-quaternion-algebra"/>. The <em>matrix associated to <m>b_Q</m></em> is the following matrix.
                <me>
                    \begin{pmatrix}b_Q(1,1)\amp b_Q(1,i)\amp b_Q(1,j)\amp b_Q(1,k)\\b_Q(i,1)\amp b_Q(i,i)\amp b_Q(i,j)\amp b_Q(i,k)\\b_Q(j,1)\amp b_Q(j,i)\amp b_Q(j,j)\amp b_Q(j,k)\\b_Q(k,1)\amp b_Q(k,i)\amp b_Q(k,j)\amp b_Q(k,k)\end{pmatrix}
                </me>
            </p>
        </statement>
    </definition>
    <definition xml:id="def-regular-quadratic-form">
        <title>Regular/nonsingular quadratic form</title>       
        <statement>
            <p>
                Keep notations of <xref ref="def-symmetric-bilinear-form-associated-to-quaternion-algebra"/>. The quadratic form <m>q</m> or the symmetric bilinear form <m>b_Q</m> is said to be <em>regular</em> or <em>nonsingular</em> if the matrix associated to <m>b_Q</m> is invertible.
            </p>
        </statement>
    </definition>
    <lemma xml:id="lem-matrix-associated-to-norm-form-is-diagonal">
        <statement>
            <p>
                Keep notations of <xref ref="def-symmetric-bilinear-form-associated-to-quaternion-algebra"/>. The matrix associated to <m>b_Q</m> is a diagonal matrix <m>{\rm diag}(1,-a,-b,ab)</m>, and <m>b_Q</m> is regular.
            </p>
        </statement>
    </lemma>
    <proof>
        <p>
            An easy calculations show that <m>\{1,i,j,k\}</m> is an orthogonal basis with respect to <m>b_Q</m>. Hence, the matrix associated to <m>b_Q</m> is a diagonal matrix. More precisely, we get the following.
                <me>
                    \begin{pmatrix}b_Q(1,1)\amp b_Q(1,i)\amp b_Q(1,j)\amp b_Q(1,k)\\b_Q(i,1)\amp b_Q(i,i)\amp b_Q(i,j)\amp b_Q(i,k)\\b_Q(j,1)\amp b_Q(j,i)\amp b_Q(j,j)\amp b_Q(j,k)\\b_Q(k,1)\amp b_Q(k,i)\amp b_Q(k,j)\amp b_Q(k,k)\end{pmatrix}=\begin{pmatrix}1\amp 0\amp 0\amp 0\\0\amp -a\amp 0\amp 0\\0\amp 0\amp -b\amp 0\\0\amp 0\amp 0\amp ab\end{pmatrix}
                </me>
            As <m>a,b\in\dot{F}</m>, we get that <m>b_Q</m> is regular.
        </p>
    </proof>
 <!--   <definition xml:id="def-pure-quaternions-space">
        <statement>
            <p>
                Let <m>F</m> be a field of characteristic different from <m>2</m>, and <m>Q=(a,b)_F</m> a quaternion algebra over <m>F</m>. An element of the following <m>F</m>-vector subspace of <m>Q</m> is called a <em>pure quaternion</em>.
                <me>
                    Q_0=\{a_1i+a_2j+a_3k:a_1,a_2,a_3\in F\}=\{x\in Q:\gamma(x)=-x\}
                </me>
            </p>
        </statement>
    </definition>-->
    <theorem xml:id="thm-isomorphism-of-quaternion-algebra-with-associated-quadratic-space">
        <statement>
            <p>
                Let <m>F</m> be a field of characteristic different from <m>2</m>. Suppose that <m>Q=(a,b)_F</m> and <m>Q'=(a',b')_F</m> are quaternion algebras over <m>F</m>. Then, <m>Q\simeq Q'</m> as an <m>F</m>-algebras if and only if there exists an <m>F</m>-linear isomorphism <m>\ell\colon Q_+\to Q'_+</m> such that <m>\Nrd{Q'}(\ell(x))=\Nrd{Q}(x)</m> for all <m>x\in Q_+</m>.
            </p>
        </statement>
    </theorem>
    <proof>
        <p>
            We use <xref ref="lem-square-of-pure-quaternion"/> without explicit mention. We also denote the canonical involution on both <m>Q</m> and <m>Q'</m> by <m>\gamma</m>.
        </p>
        <p>
            Suppose that <m>\phi\colon Q\to Q'</m> is an <m>F</m>-algebra isomophism. For <m>x\in Q_+</m>, <m>\phi(x)\not\in F</m> as <m>x\not\in F</m>. Furthermore, <m>x^2\in F</m> implies that <m>\left(\phi(x)\right)^2=\phi(x^2)\in F</m>. We thus get that <m>\phi(x)\in Q_+'</m> for every <m>x\in Q_+</m>. Therefore, <m>\ell=\phi|_{Q_+}</m> is an <m>F</m>-linear map from <m>Q_+</m> to <m>Q_+'</m>. As <m>\phi</m> is injective, the map <m>\ell</m> is injective as well. Now assume that <m>y\in Q_+'</m>. Then there exists some <m>x\in Q</m> such that <m>\phi(x)=y</m>. As <m>y\not\in F</m> and <m>y^2\in F</m> we get that <m>x\not\in F</m> and that <m>\phi(x^2)\in F</m>, i.e., <m>\phi(x^2)=\alpha\in F</m> for some <m>\alpha</m>. Thus, <m>\phi\left(x^2-\alpha\cdot 1\right)=0</m>, i.e., <m>x^2\in F</m>. Hence, <m>x\in Q_+</m> and thus, <m>\ell</m> is surjective as well. It follows that <m>\ell\colon Q_+\to Q_+'</m> is an <m>F</m>-isomorphism. Finally for <m>x\in Q_+</m>, we have <m>\Nrd{Q}(x)=-x^2\in F</m> and thus, <me>\Nrd{Q_+'}(\ell(x))=-\ell(x)^2=-\ell\left(x^2\right)=-x^2=\Nrd{Q}(x)</me>.
        </p>
        <p>
            Now assume there is an <m>F</m>-linear isomorphism <m>\ell\colon Q_+\to Q_+'</m> such that <m>\Nrd{Q'}(\ell(x))=\Nrd{Q}(x)</m> for all <m>x\in Q_+</m>. Define <m>\phi\colon Q\to Q'</m> by <m>1\mapsto 1</m>, <m>i\mapsto\ell(i)</m>, <m>j\mapsto\ell(j)</m>, and <m>k\mapsto\ell(k)</m>. Extend <m>\phi</m> linearly to all <m>Q</m>. The reader may check that <m>\phi</m> is an <m>F</m>-algebra isomorphism. Here we only check that <m>\phi(i)\phi(j)=-\phi(j)\phi(i)</m>.
            First observe the following.
            <md>
                <mrow>b_{Q'}\left(\ell(i-j),\ell(i-j)\right) \amp= b_{Q'}\left(\ell(i),\ell(i)\right)-2b_{Q'}\left(\ell(i),\ell(j)\right)+b_{Q'}\left(\ell(j),\ell(j)\right)</mrow>
                <mrow> \amp=b_{Q}\left(i,i\right)-2b_{Q'}\left(\ell(i),\ell(j)\right)+b_{Q}\left(j,j\right) </mrow>
            </md>
            On the other hand,
            <md>
                <mrow> b_{Q'}\left(\ell(i-j),\ell(i-j)\right)\amp=b_{Q}\left(i-j,i-j\right) </mrow>
                <mrow> \amp=b_{Q}\left(i,i\right)-2b_{Q}\left(i,j\right)+b_{Q}\left(j,j\right).</mrow>
            </md>
            Therefore,
            <men xml:id="eq-bilinear-forms-equal-on-i-j">
                b_{Q'}\left(\ell(i),\ell(j)\right)=b_{Q}\left(i,j\right).
            </men>
            
            Using <m>\phi(i),\phi(j)\in Q_+'</m> and the associated symmetric bilinear form <m>b_{Q'}</m> we get the following.
            <md>
                <mrow>b_{Q'}(\phi(i),\phi(j)) \amp= \tfrac{1}{2}\left(\phi(i)\gamma(\phi(j))+\phi(j)\gamma(\phi(i))\right)\amp </mrow>
                <mrow> \amp=-\tfrac{1}{2}\left(\phi(i)\phi(j)+\phi(j)\phi(i)\right)\amp\text{ as }\phi(i),\phi(j)\in Q_+' </mrow>
                <mrow> \amp=b_Q(i,j) \amp \text{ by }<xref ref="eq-bilinear-forms-equal-on-i-j"/></mrow>
                <mrow> \amp=0 \amp</mrow>
            </md>
            This shows that <m>\phi(i)\phi(j)=-\phi(j)\phi(i)</m>.
        </p>
    </proof>
    <corollary xml:id="cor-isomorphism-of-quaternions-upto-sqaures">
        <statement>
            <p>
                Let <m>F</m> be a field of characteristic <m>\neq 2</m>. For <m>a,b,c\in\dot{F}</m>, <me>(ac^2,b)_F\simeq(a,b)_F\simeq(a,bc^2)_F.</me>
            </p>
        </statement>
    </corollary>
    <proof>
        <p>
            We use <xref ref="thm-isomorphism-of-quaternion-algebra-with-associated-quadratic-space"/>. Put <m>Q=(a,b)_F</m> and <m>Q'=(ac^2,b)_F</m>. We assume that <m>Q</m> (resp., <m>Q'</m>) is generated by <m>i,j</m> (resp., <m>i',j'</m>). Define <m>\ell\colon Q_+\to Q_+'</m> by <me>\ell(a_1i+a_2j+a_3ij)=\tfrac{1}{c}a_1i'+a_2j'+\tfrac{1}{c}a_3i'j'.</me>
            Thus, <m>\Nrd{Q'}(\ell(x))=\Nrd{Q}(x)</m> for every <m>x\in Q_+</m>. Hence, <m>(a,b)_F\simeq (ac^2,b)_F</m>. Similarly, one can show that <m>(a,b)_F\simeq (a,bc^2)_F</m>.
        </p>
    </proof>
</section>